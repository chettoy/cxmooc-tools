import{_ as n,c as a,a as e,o}from"./app-wFSEqLp_.js";const p={};function t(c,s){return o(),a("div",null,s[0]||(s[0]=[e(`<blockquote><p>为了方便开发,抽象了平台的流程,只需要专注于功能的实现</p></blockquote><h2 id="开始" tabindex="-1"><a class="header-anchor" href="#开始"><span>开始</span></a></h2><p>创建新的平台应该遵循现有规则,在<code>mooc</code>文件夹下创建以平台为命名规则的文件夹</p><p>且有文件<code>mooc/[platform]/platform.ts</code>,实现<code>MoocFactory</code>接口的类,用于通过页面信息来创建对应的具体<code>Mooc</code>对象,如果不符合规则返回<code>null</code>,对应<code>构建实例(mooc/[platform]/platform.ts)</code>生命周期</p><p>需要在<code>/build/cxmooc-tools/manifest.json</code>文件和<code>/src/config.ts</code>中添加对应的URL规则</p><p>如果你需要开发油猴脚本,那么你需要在<code>/src/tampermonkey</code>目录中添加对应的油猴文件,且在<code>webpack.tampermonkey.js</code>和<code>internal/pack-crx.ts:43</code>中添加对应配置,具体请参考现有平台</p><h2 id="实现mooc接口" tabindex="-1"><a class="header-anchor" href="#实现mooc接口"><span>实现Mooc接口</span></a></h2><p>具体请看已有平台</p><h4 id="接口定义" tabindex="-1"><a class="header-anchor" href="#接口定义"><span>接口定义</span></a></h4><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts"><pre><code><span class="line"><span class="token comment">// 事件</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">MoocEvent</span> <span class="token operator">=</span> <span class="token string">&quot;complete&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;reload&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;error&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;taskComplete&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 单个Mooc任务,可能会被抛弃</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Mooc</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Mooc任务集,未来更倾向于使用此接口</span></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">MoocTaskSet</span> <span class="token keyword">extends</span> <span class="token class-name">Mooc</span><span class="token punctuation">,</span> IEventListener<span class="token operator">&lt;</span>MoocEvent<span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 初始化</span></span>
<span class="line">    <span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 停止</span></span>
<span class="line">    <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 返回下一个任务点</span></span>
<span class="line">    <span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Task<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 设置任务点位置</span></span>
<span class="line">    <span class="token function">SetTaskPointer</span><span class="token punctuation">(</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10)]))}const i=n(p,[["render",t]]),r=JSON.parse('{"path":"/Develop/Platform.html","title":"平台开发","lang":"zh-CN","frontmatter":{"title":"平台开发"},"git":{"updatedTime":1604807562000,"contributors":[{"name":"CodFrm","username":"CodFrm","email":"code.farmer@qq.com","commits":3,"url":"https://github.com/CodFrm"}],"changelog":[{"hash":"20dd445eaa6e0fd64f56e992817027dee978b0d6","time":1604807562000,"email":"love@xloli.top","author":"CodFrm","message":"优化源码,添加注释"},{"hash":"1de3c98825266de63a837a863d14a007e548e9d1","time":1604216602000,"email":"love@xloli.top","author":"CodFrm","message":"修改文档"},{"hash":"46842cb7c2601054ca5527e89dbe62622dd6de12","time":1603806167000,"email":"code.farmer@qq.com","author":"CodFrm","message":"开发文档"}]},"filePathRelative":"Develop/Platform.md"}');export{i as comp,r as data};
